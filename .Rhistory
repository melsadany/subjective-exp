###########################################################################################
#                               Extract Reddit Content                                    #
###########################################################################################
rm(list = ls())
gc()
source("/Dedicated/jmichaelson-wdata/msmuhammad/msmuhammad-source.R")
set.seed(123)
###########################################################################################
library(RedditExtractoR)
devtools::install_github("https://github.com/nathancunn/pushshiftR")
###########################################################################################
###########################################################################################
###########################################################################################
###########################################################################################
# try pushift api
library(pushshiftR)
tmp <- getPushshiftData(postType = "comment",
size = 1000,
after = "1546300800",
subreddit = "depression",
nest_level = 1)
tmp <- getPushshiftData(postType = "comment",
size = 1000,
after = "1546300800",
subreddit = "soccer",
nest_level = 1)
library(jsonlite)
postType = "comment"
size = 1000
after = "1546300800"
subreddit = "soccer"
nest_level = 1
paste("https://api.pushshift.io/reddit/search/",
postType,
"?",
ifelse(is.null(title), "", sprintf("&title=%s", title)),
ifelse(is.null(size), "", sprintf("&size=%s", size)),
ifelse(is.null(q), "", sprintf("&q=%s", q)),
ifelse(is.null(after), "", sprintf("&after=%s", after)),
ifelse(is.null(before), "", sprintf("&before=%s", before)),
ifelse(is.null(subreddit), "", sprintf("&subreddit=%s", subreddit)),
ifelse(is.null(nest_level), "", sprintf("&nest_level=%s", nest_level)),
sep = "")
paste("https://api.pushshift.io/reddit/search/",
postType,
"?", "&size=%s", size, "&after=%s", after, "&subreddit=%s", subreddit, "&nest_level=%s", nest_level)
paste("https://api.pushshift.io/reddit/search/",
postType,
"?", "&size=%s", size, "&after=%s", after, "&subreddit=%s", subreddit, "&nest_level=%s", nest_level, sep = "")
pushift.url <- "https://api.pushshift.io/reddit/search/comment?&size=%s1000&after=%s1546300800&subreddit=%ssoccer&nest_level=%s1"
tmp <- pushift.url %>%
jsonlite::fromJSON() %>%
.$data %>%
jsonlite::flatten(recursive = TRUE) %>%
select(author, body, parent_id, score, created_utc, subreddit) %>%
as_tibble()
get_reddit(subreddit = "Parenting", page_threshold = 2, sort_by = 'new')
###########################################################################################
library(RedditExtractoR)
links <- reddit_urls(
search_terms   = "depression",
page_threshold = 10,
sort_by = 'new'
)
###########################################################################################
library(RedditExtractoR)
###########################################################################################
###########################################################################################
###########################################################################################
###########################################################################################
# try pushift api
library(pushshiftR)
tmp <- getPushshiftData(postType = "comment",
size = 1000,
after = "1546300800",
subreddit = "soccer",
nest_level = 1)
pushift.url <- "https://api.pushshift.io/reddit/search/comment?&size=%s1000&after=%s1546300800&subreddit=%ssoccer&nest_level=%s1"
tmp <- pushift.url %>%
jsonlite::fromJSON() %>%
.$data %>%
jsonlite::flatten(recursive = TRUE) %>%
select(author, body, parent_id, score, created_utc, subreddit) %>%
as_tibble()
pushift.url
tmp <- getPushshiftData(postType = "submession",
size = 1000,
after = "1546300800",
subreddit = "Parenting",
nest_level = 1)
tmp <- getPushshiftData(postType = "submission",
size = 1000,
after = "1546300800",
subreddit = "Parenting",
nest_level = 1)
tmp <- getPushshiftData(postType = "submission",
size = 10,
after = "1546300800",
subreddit = "Parenting",
nest_level = 1)
